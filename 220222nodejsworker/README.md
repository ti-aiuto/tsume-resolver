# 20220222 Node.js版(WorkerThread利用)

## 言語

JavaScript

## やること

* 詰みまでの手順を示す
* クラスの設計は適宜いい感じにしていく
* WorkerThreadを使って並列処理してみる

## やらないこと

* テストコードを書く
* 厳密な「詰将棋」に従う実装
* 厳密なキューの制御
    * RAM足りなくて落ちる場合があるが今回のバージョンでは許容する

## 「完成」の基準

* YouTubeチャンネル「将棋放浪記」の動画から適当に持ってきた局面で詰みが示せること

## コマンド

```
node main.js ..\sample\akiotetest.json
```

実行結果の例

```
---
探索を開始
再帰上限：6
全探索：false
探索完了
詰みあり：true
所要時間：651
---
後手(o): 飛 金 銀 桂 香 歩 歩
  |  ９  |  ８  |  ７  |  ６  |  ５  |  ４  |  ３  |  ２  |  １  |
------------------------------------------------------------------
一|   　 |   　 |   　 |   　 |   　 | o 玉 | @ 角 | @ 竜 |   　 |
二|   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |
三|   　 |   　 |   　 |   　 |   　 | o 角 |   　 |   　 |   　 |
四|   　 |   　 |   　 |   　 | @ 歩 |   　 |   　 |   　 |   　 |
五|   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |
六|   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |
七|   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |
八|   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |
九|   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |   　 |
------------------------------------------------------------------
先手(@): 銀

手順
[B3W5]  @ (５二) 銀 打ち
  [B3W5]  o (５二) 玉 の場合
    [B3W3]  @ (５三) 馬 で詰み
  [B5W5]  o (５二) 角 の場合
    [B5W5]  @ (２二) 馬
      [B5W5]  o (４二) 玉 の場合
        [B5W5]  @ (３二) 馬 で詰み
      [B5W5]  o (３一) 飛 打ち の場合
        [B5W5]  @ (３一) 竜 で詰み
      [B5W5]  o (３一) 金 打ち の場合
        [B5W5]  @ (３一) 竜 で詰み
      [B5W5]  o (３一) 銀 打ち の場合
        [B5W5]  @ (３一) 竜 で詰み
      [B5W5]  o (３一) 桂 打ち の場合
        [B5W5]  @ (３一) 竜 で詰み
      [B5W5]  o (３一) 香 打ち の場合
        [B5W5]  @ (３一) 竜 で詰み
      [B5W5]  o (３一) 歩 打ち の場合
        [B5W5]  @ (３一) 竜 で詰み
```
